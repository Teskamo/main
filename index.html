<html>
    <head>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"
            integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
            crossorigin="anonymous">
        </script>
        <style>
            h1{
                font-size:30px;
            }
            .window_UI_file
            {
                display:inline-block;
                padding: 5px 15px;
                margin-bottom:20px;
                text-align:center;
                cursor: default;
            }
            .window_UI_file:hover{
                background:rgba(115, 161, 236,.3);
                border:rgba(115, 161, 236, .6);
            }
            .window_UI_file.selected{
                background:rgba(115, 161, 236,.6);
                border:rgba(115, 161, 236, .9);
            }

                .window_UI_file img{
                    margin:auto;
                    display:block;
                }
        </style>
    </head>
    <body>
        <div><h1>윈도우처럼 사용해주세요</h1></div>
        <div>TODO:드래그해서 위치 변경하는 툴 찾기</div>
        <div>안되면 바닥 클릭 다시 수정</div>
        <div>
            <div class="window_UI_file" href="https://naver.com" data-no="1">
                <img src="img/chrome-logo.svg"/>
                <span>naver</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="2">
                <img src="img/chrome-logo.svg"/>
                <span>Youtube</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="3">
                <img src="img/chrome-logo.svg"/>
                <span>test1</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="4">
                <img src="img/chrome-logo.svg"/>
                <span>test2</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="5">
                <img src="img/chrome-logo.svg"/>
                <span>test3</span>
            </div>
        </div>
        <div>
            <div class="window_UI_file" href="https://naver.com" data-no="6">
                <img src="img/chrome-logo.svg"/>
                <span>naver</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="7">
                <img src="img/chrome-logo.svg"/>
                <span>Youtube</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="8">
                <img src="img/chrome-logo.svg"/>
                <span>test1</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="9">
                <img src="img/chrome-logo.svg"/>
                <span>test2</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="10">
                <img src="img/chrome-logo.svg"/>
                <span>test3</span>
            </div>
        </div>
        <div>
            <div class="window_UI_file" href="https://naver.com" data-no="11">
                <img src="img/chrome-logo.svg"/>
                <span>naver</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="12">
                <img src="img/chrome-logo.svg"/>
                <span>Youtube</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="13">
                <img src="img/chrome-logo.svg"/>
                <span>test1</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="14">
                <img src="img/chrome-logo.svg"/>
                <span>test2</span>
            </div>
            <div class="window_UI_file" href="https://youtube.com" data-no="15">
                <img src="img/chrome-logo.svg"/>
                <span>test3</span>
            </div>
        </div>
        <script>
            $(function(){
                //아무것도 없는 바닥 클릭
                $("body").click(function(e){
                    if($(e.target).is("body")){
                        $(".window_UI_file").removeClass("selected");
                    }
                });

                //window UI 파일 클릭
                $("body").on("click", ".window_UI_file", function(){
                    $(".window_UI_file").removeClass("selected");
                    $(this).addClass("selected");
                });

                //window UI 파일 더블클릭
                $("body").on("dblclick",".window_UI_file", function(){
                    var href = $(this).attr("href");
                    window.open(href, '_blank');
                });

                //방향키 및 엔터
                $(document).keydown(function(e){
                    if($(".selected").length > 0){
                        var selected_top = $(".selected").position().top;
                        var selected_left = $(".selected").position().left;
                        if(37 <= e.which && e.which <= 40){
                            var leftright_least_error = 10000;
                            var updown_least_error = 10000;
                            var least_error_no;
                            var $candidate_files = $(".window_UI_file:not(.selected)");

                            //각 방향에 있는 파일만 필터
                            switch(e.which){
                                case 37:    //좌
                                    $candidate_files = $candidate_files.filter(function(){
                                        return $(this).position().left < selected_left;
                                    });
                                    break;
                                
                                case 39:    //우
                                    $candidate_files = $candidate_files.filter(function(){
                                        return $(this).position().left > selected_left;
                                    });
                                    break;
                                
                                case 38:    //상
                                    $candidate_files = $candidate_files.filter(function(){
                                        return $(this).position().top < selected_top;
                                    });
                                    break;

                                case 40:    //하
                                    $candidate_files = $candidate_files.filter(function(){
                                        return $(this).position().top > selected_top;
                                    });
                                    break;
                            }

                            switch(e.which){
                                case 37:
                                case 39:
                                    $candidate_files.each(function(){   //좌우 오차가 가장 작은 파일들 중
                                        var leftright_error = Math.abs($(this).position().left - selected_left);
                                        if(leftright_error < leftright_least_error){
                                            leftright_least_error = leftright_error;
                                        }
                                    })
                                    .each(function(){   //상하 오차가 가장 작은 파일을 고른다
                                        if(Math.abs($(this).position().left - selected_left) == leftright_least_error){
                                            var updown_error = Math.abs($(this).position().top - selected_top);
                                            if(updown_error < updown_least_error){
                                                updown_least_error = updown_error;
                                                least_error_no = $(this).data("no");
                                            }
                                        }
                                    });
                                    break;

                                case 38:
                                case 40:
                                    $candidate_files.each(function(){   //상하 오차가 가장 작은 파일들 중
                                        var updown_error = Math.abs($(this).position().top - selected_top);
                                        if(updown_error < updown_least_error){
                                            updown_least_error = updown_error;
                                        }
                                    })
                                    .each(function(){   //좌우 오차가 가장 작은 파일을 고른다
                                        if(Math.abs($(this).position().top - selected_top) == updown_least_error){
                                            var leftright_error = Math.abs($(this).position().left - selected_left);
                                            if(leftright_error < leftright_least_error){
                                                leftright_least_error = leftright_error;
                                                least_error_no = $(this).data("no");
                                            }
                                        }
                                    });
                                    break;
                            }

                            //가장 작은 오차를 가진 파일 클릭
                            if($candidate_files.length > 0){
                                $(".selected").removeClass("selected");
                                $(".window_UI_file[data-no='" + least_error_no + "']").click();
                            }
                        } else if(e.which == 13){   //엔터
                            $(".selected").dblclick();
                        }
                    }
                })
            })
        </script>
    </body>
</html>